<character-builder-navigation></character-builder-navigation>
<quick-overview-bar></quick-overview-bar>


<div id="perks-builder" *ngIf="character$ | async as character;">

    <div class="perks-resources">
        Your character has <span>{{ openCharacterPoints }} / {{ totalCharacterPoints }}</span> CP still available.
    </div>

    <div class="searchbar">
        Search: <input (input)="search($event)">
    </div>

    <h2>Owned Perks</h2>
    <div class="perk-row" *ngFor="let pal of filtered(ownedPerks); trackBy:perkByName">

        <div class="select-box" (click)="deSelectPerk(pal)">
            <span class="material-icons-outlined">check_circle_outline</span>
        </div>

        <mat-expansion-panel class="perk-expandable">
            <mat-expansion-panel-header>{{ pal.perk.name }} ({{ pal.perk.getCpCostForLevel(pal.level, character.perks) }}CP)</mat-expansion-panel-header>
            <b class="zodiacsign-description">Cost: {{ pal.perk.getCpCostForLevel(pal.level, character.perks) }}CP</b><br />
            <b class="zodiacsign-description">Requirements: {{ pal.perk.requirements }}</b><br />
            <b class="zodiacsign-description">Tags: {{ pal.perk.tags }}</b><br />

            <blockquote class="zodiacsign-description" [innerHTML]="pal.perk.description"></blockquote>
        </mat-expansion-panel>
    </div>



    <h2>Available Perks</h2>
    <div class="available-perks">
        <div class="perk-row" *ngFor="let pal of filtered(availablePerks); trackBy:perkByName">

            <div class="select-box" (click)="selectPerk(pal)">
                <span class="material-icons-outlined">circle_outline</span>
            </div>

            <mat-expansion-panel class="perk-expandable">
                <mat-expansion-panel-header>{{ pal.perk.name }} ({{ pal.perk.getCpCostForLevel(pal.level, character.perks) }}CP)</mat-expansion-panel-header>
                <b class="zodiacsign-description">Cost: {{ pal.perk.getCpCostForLevel(pal.level, character.perks) }}CP</b><br />
                <b class="zodiacsign-description">Requirements: {{ pal.perk.requirements }}</b><br />
                <b class="zodiacsign-description">Tags: {{ pal.perk.tags }}</b><br />

                <blockquote class="zodiacsign-description" [innerHTML]="pal.perk.description"></blockquote>
            </mat-expansion-panel>
        </div>
    </div>

</div>
